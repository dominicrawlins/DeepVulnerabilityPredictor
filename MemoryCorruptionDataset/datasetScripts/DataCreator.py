import os
import subprocess

class DataCreator:
    def __init__(self):
        pass

    def createFextractorStatic(self, rootdir):
        for dir in (os.listdir(os.path.expanduser(rootdir))):
            self.fextract(dir)


    def fextract(self, dir):
        os.chdir(os.path.expanduser("../programs/" + dir))
        f = open("details.txt", "r")
        path = list(filter(lambda x: "location" in x, f))[0].replace(" ", "").replace("\n", "").split(":")[1]
        path = os.path.expanduser(path)
        csv_file = dir + "_static.csv"
        print("Getting: ", dir)
        subprocess.run(['/home/dom/.local/bin/fextractor', '--static', '--out-file', csv_file, path])
