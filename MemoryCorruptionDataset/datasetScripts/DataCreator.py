import os
import subprocess

bannedList = ['curl']

class DataCreator:
    def __init__(self):
        pass

    def createFextractorStatic(self, rootdir):
        for dir in (os.listdir(os.path.expanduser(rootdir))):
            if(not dir in bannedList):
                self.fextract(rootdir, dir)


    def fextract(self, rootdir, dir):
        os.chdir(os.path.expanduser(rootdir + dir))
        print(os.path.expanduser(rootdir + dir))
        f = open("details.txt", "r")
        path = list(filter(lambda x: "location" in x, f))[0].replace(" ", "").replace("\n", "").split(":")[1]
        path = os.path.expanduser(path)
        csv_file = dir + "_static.csv"
        print("Getting: ", dir)
        subprocess.run(['/home/dom/.local/bin/fextractor', '--static', '--out-file', csv_file, path])
